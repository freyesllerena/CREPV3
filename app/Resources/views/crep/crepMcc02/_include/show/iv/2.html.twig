{% set listeNiveauxRequise = crep.competencesRequises | allNiveauCompetenceCrepMcc02 %}
{% set listeRequises = crep.competencesRequises %}
{% set listeNiveauxDemontree = crep.competencesDemontrees | allNiveauCompetenceCrepMcc02 %}
{% set listeDemontrees = crep.competencesDemontrees %}
<br>

<div class="row">
    <div class="col-md-12 col-sm-12 col-xs-12">
        <table class="table table-bordered">
            <thead>
            <tr>
                <th class="text-center">Compétences</th>
                {% for key, niveau in listeNiveauxRequise %}
                    <th class="text-center" width="100px">{{ key | capitalize }}</th>
                {% endfor %}
            </tr>
            <tr>
                <th colspan="6" class="text-left">Requises dans les fonctions (à compléter à partir de la fiche de
                    poste)
                </th>
            </tr>
            </thead>
            <tbody>
            {% for key, competence in crep.competencesRequises %}

                <tr>
                    <td>{{ competence.libelle | nl2br }}</td>

                    {% if competence.niveau  is  not null %}

                        {% for keyRequise, action in listeRequises %}

                            {% if key ==  keyRequise %}

                                {% for index in listeNiveauxRequise %}

                                    {% if index ==  competence.niveau %}
                                        <td class="text-center"><i class="fa fa-check"></i><br></td>
                                    {% else %}
                                        <td><br></td>
                                    {% endif %}

                                {% endfor %}

                            {% endif %}

                        {% endfor %}

                    {% else %}

                        {% for index in listeNiveauxRequise %}
                            <td><br></td>
                        {% endfor %}

                    {% endif %}

                </tr>

            {% endfor %}
            <tr>
                <td colspan="6">
                    <label>Observations éventuelles :</label>
                    <p class="well well-xs"> {{ crep.observationsCompetencesRequises | nl2br }}</p>
                </td>
            </tr>
            </tbody>
            <thead>
            <tr>
                <th colspan="6" class="text-left">Autres compétences démontrées par l’agent-e</th>
            </tr>
            </thead>
            <tbody>
            {% if crep.competencesDemontrees.toArray() is empty %}
            {% for index in 0..2 %}
                <tr>
                    <td><br></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
            {% endfor %}
            {% else %}
            {#<tbody>#}
            {% for key, competence in crep.competencesDemontrees %}

                <tr>
                    <td>{{ competence.libelle | nl2br }}</td>

                    {% if competence.niveau  is  not null %}

                        {% for keyDemontree, demontree in listeDemontrees %}

                            {% if key ==  keyDemontree %}

                                {% for index in listeNiveauxDemontree %}

                                    {% if index ==  competence.niveau %}
                                        <td class="text-center"><i class="fa fa-check"></i><br></td>
                                    {% else %}
                                        <td><br></td>
                                    {% endif %}

                                {% endfor %}

                            {% endif %}

                        {% endfor %}

                    {% else %}

                        {% for index in listeNiveauxDemontree %}
                            <td><br></td>
                        {% endfor %}

                    {% endif %}

                </tr>

            {% endfor %}
            <tr>
                <td colspan="6">
                    <label>Observations éventuelles :</label>
                    <p class="well well-xs"> {{ crep.observationsCompetencesDemontrees | nl2br }}</p>
                </td>
            </tr>
            </tbody>
            {% endif %}

        </table>
    </div>
</div>

<br>
