{% extends "crep/crepScl02/scl02.base.html.twig" %}

{% block accueil %} {% endblock %}
{% block campagne %} active {% endblock %}

{% block content %}
    {% if errors| length > 0 %}
        <div class="alert alert-danger alert-dismissible fade in" role="alert">
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">Ã—</span>
            </button>
            <strong>Le formulaire de CREP n'est pas valide.</strong><br>
            Veuillez rectifier votre saisie.
        </div>
    {% endif %}

    {{ form_start(form, {'attr': {'novalidate': 'novalidate', 'class': 'form-horizontal'}}) }}
    {{ parent() }}
    {{ block('bouton_enregistrer') }}
    {{ form_widget(form._token) }}
    {{ form_end(form, {'render_rest': false}) }}
{% endblock content %}

{% block i01 %}
    {% include 'crep/crepScl02/_include/edit/0/1.html.twig' %}
{% endblock i01 %}

{% block i02 %}
    {% include 'crep/crepScl02/_include/edit/0/2.html.twig' %}
{% endblock i02 %}

{% block i03 %}
    {% include 'crep/crepScl02/_include/edit/0/3.html.twig' %}
{% endblock i03 %}

{% block i1 %}
    {% include 'crep/crepScl02/_include/edit/i/1.html.twig' %}
{% endblock i1 %}

{% block i2 %}
    {% include 'crep/crepScl02/_include/edit/i/2.html.twig' %}
{% endblock i2 %}

{% block i3 %}
    {% include 'crep/crepScl02/_include/edit/i/3.html.twig' %}
{% endblock i3 %}

{% block i4 %}
    {% include 'crep/crepScl02/_include/edit/i/4.html.twig' %}
{% endblock i4 %}

{% block i5 %}
    {% include 'crep/crepScl02/_include/edit/i/5.html.twig' %}
{% endblock i5 %}

{% block i6 %}
    {% include 'crep/crepScl02/_include/edit/i/6.html.twig' %}
{% endblock i6 %}

{% block ii1 %}
    {% include 'crep/crepScl02/_include/edit/ii/1.html.twig' %}
{% endblock ii1 %}

{% block ii2 %}
    {% include 'crep/crepScl02/_include/edit/ii/2.html.twig' %}
{% endblock ii2 %}

{% block iii1 %}
    {% include 'crep/crepScl02/_include/edit/iii/1.html.twig' %}
{% endblock iii1 %}

{% block iii2 %}
    {% include 'crep/crepScl02/_include/edit/iii/2.html.twig' %}
{% endblock iii2 %}

{% block iii3 %}
    {% include 'crep/crepScl02/_include/edit/iii/3.html.twig' %}
{% endblock iii3 %}

{% block iii4 %}
    {% include 'crep/crepScl02/_include/edit/iii/4.html.twig' %}
{% endblock iii4 %}

{% block javascripts %}
    {{ parent() }}
    <!-- chained -->
    <script src="{{ asset('bundles/framework/cisirh/js/chained.js') }}"></script>
    <script type="text/javascript">

        $(document).ready(function () {
            if ($('#crep_scl02_refusEntretienProfessionnel').attr('checked')) {
                document.getElementById("crep_scl02_dateEntretien").disabled = true;
            } else {
                document.getElementById("crep_scl02_dateEntretien").disabled = false;
            }
        });

        $("#crep_scl02_refusEntretienProfessionnel").on('ifChanged', function () {
            if ($('#crep_scl02_refusEntretienProfessionnel').attr('checked')) {
                $('#crep_scl02_refusEntretienProfessionnel').removeAttr("checked");
                document.getElementById("crep_scl02_dateEntretien").disabled = false;
                $('#crep_scl02_motifRefusEntretien').val('');
            } else {
                $('#crep_scl02_refusEntretienProfessionnel').attr("checked", "checked");
                $('#crep_scl02_dateEntretien').val('');
                document.getElementById("crep_scl02_dateEntretien").disabled = true;
            }
        });

        $(function () {

            var crepCollections = new Crep.Collections();

            var refusEntretienRadio = $("input[name*='refusEntretienProfessionnel']");

            // Cacher les freres du div row avec la methode slideUp de jquery
            $("input[name*='refusEntretienProfessionnel']:not(:checked)").closest("div.row:not('.x_content')").next().slideUp();

            refusEntretienRadio.on('ifToggled', function (event) {
                var target = $(event.target);
                if (target.prop('checked')) {
                    target.closest("div.row:not('.x_content')").next().slideDown();
                } else {
                    target.closest("div.row:not('.x_content')").next().slideUp();
                }
            });
        });
    </script>
{% endblock javascripts %}
